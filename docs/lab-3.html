<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Chapter 3 Lab 3 | ug1-practical</title>
  <meta name="description" content="Chapter 3 Lab 3 | ug1-practical-materials">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="Chapter 3 Lab 3 | ug1-practical" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Chapter 3 Lab 3 | ug1-practical-materials" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Lab 3 | ug1-practical" />
  
  <meta name="twitter:description" content="Chapter 3 Lab 3 | ug1-practical-materials" />
  

<meta name="author" content="psyTeachR">


<meta name="date" content="2019-03-21">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="lab-2.html">
<link rel="next" href="lab-4.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="include/psyteachr.css" type="text/css" />
<link rel="stylesheet" href="include/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">ug-practical</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Overview</a><ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html#the-overall-goal-for-our-students-in-our-year-1-psychology-labs"><i class="fa fa-check"></i><b>0.1</b> The overall goal for our students in our year 1 Psychology labs</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="lab-1.html"><a href="lab-1.html"><i class="fa fa-check"></i><b>1</b> Lab 1</a><ul>
<li class="chapter" data-level="1.1" data-path="lab-1.html"><a href="lab-1.html#pre-class-activity"><i class="fa fa-check"></i><b>1.1</b> Pre-class activity</a></li>
<li class="chapter" data-level="1.2" data-path="lab-1.html"><a href="lab-1.html#in-class-activity"><i class="fa fa-check"></i><b>1.2</b> In-class activity</a></li>
<li class="chapter" data-level="1.3" data-path="lab-1.html"><a href="lab-1.html#post-class-activity"><i class="fa fa-check"></i><b>1.3</b> Post-class activity</a></li>
<li class="chapter" data-level="1.4" data-path="lab-1.html"><a href="lab-1.html#additional-resources-around-open-science-and-replicability"><i class="fa fa-check"></i><b>1.4</b> Additional resources around open science and replicability</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="lab-2.html"><a href="lab-2.html"><i class="fa fa-check"></i><b>2</b> Lab 2</a><ul>
<li class="chapter" data-level="2.1" data-path="lab-2.html"><a href="lab-2.html#pre-class-activity-1"><i class="fa fa-check"></i><b>2.1</b> Pre-class activity</a><ul>
<li class="chapter" data-level="2.1.1" data-path="lab-2.html"><a href="lab-2.html#data-management"><i class="fa fa-check"></i><b>2.1.1</b> Data Management</a></li>
<li class="chapter" data-level="2.1.2" data-path="lab-2.html"><a href="lab-2.html#the-first-thing-we-need-to-do-is-set-the-working-directory."><i class="fa fa-check"></i><b>2.1.2</b> The first thing we need to do is set the working directory.</a></li>
<li class="chapter" data-level="2.1.3" data-path="lab-2.html"><a href="lab-2.html#important-info-on-our-homework-worksheets"><i class="fa fa-check"></i><b>2.1.3</b> Important info on our homework worksheets</a></li>
<li class="chapter" data-level="2.1.4" data-path="lab-2.html"><a href="lab-2.html#take-home-message"><i class="fa fa-check"></i><b>2.1.4</b> Take home message</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="lab-2.html"><a href="lab-2.html#in-class-activity-1"><i class="fa fa-check"></i><b>2.2</b> In-class activity</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="lab-3.html"><a href="lab-3.html"><i class="fa fa-check"></i><b>3</b> Lab 3</a><ul>
<li class="chapter" data-level="3.1" data-path="lab-3.html"><a href="lab-3.html#pre-class-activity-2"><i class="fa fa-check"></i><b>3.1</b> Pre-class activity</a></li>
<li class="chapter" data-level="3.2" data-path="lab-3.html"><a href="lab-3.html#in-class-activity-2"><i class="fa fa-check"></i><b>3.2</b> In-class activity</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="lab-4.html"><a href="lab-4.html"><i class="fa fa-check"></i><b>4</b> Lab 4</a><ul>
<li class="chapter" data-level="4.1" data-path="lab-4.html"><a href="lab-4.html#pre-class-activity-3"><i class="fa fa-check"></i><b>4.1</b> Pre-class activity</a></li>
<li class="chapter" data-level="4.2" data-path="lab-4.html"><a href="lab-4.html#in-class-activity-3"><i class="fa fa-check"></i><b>4.2</b> In-class activity</a></li>
<li class="chapter" data-level="4.3" data-path="lab-4.html"><a href="lab-4.html#post-class-activity-1"><i class="fa fa-check"></i><b>4.3</b> Post-class activity</a></li>
<li class="chapter" data-level="4.4" data-path="lab-4.html"><a href="lab-4.html#additional-resources"><i class="fa fa-check"></i><b>4.4</b> Additional resources</a></li>
</ul></li>
<li class="appendix"><span><b>Appendices</b></span></li>
<li class="divider"></li>
<li><a rel="license" href="https://creativecommons.org/licenses/by-sa/4.0/" 
    target="blank"><img alt="Creative Commons License" 
    style="border-width:0" 
    src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a><li>
<li><a href="https://psyteachr.github.io/" target="blank">PsyTeachR</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">ug1-practical</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="lab-3" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> Lab 3</h1>
<p>In this lab we move on from reading data in and joining them together before selecting variables of interest to becoming familiar with the Wickham 6 and the functionality of tidyverse. Practice is an important part of PsyTeachR so in our level 1 program we ask students to repeat tasks over the labs and between in-class and assessments. This principle is carried over into the student's independent study practices as we encourage students to do prep independently but also come along to the practice sessions where space is open for students to work on lab tasks and assessments independently or discuss in groups but GTAs are present to guide and support if needed. This is an important part of our community building and creating a safe space to practice, make mistakes and develop skills.</p>
<div id="pre-class-activity-2" class="section level2">
<h2><span class="header-section-number">3.1</span> Pre-class activity</h2>
<ul>
<li>Watch Heather's video on intro to tidyverse</li>
</ul>
<div class="figure">
<embed src="images/tidyverse.mp4" />
<p class="caption">Heather's tidyverse video</p>
</div>
<ul>
<li>Work through the tidyverse book which talks you through the purpose of tidyverse using examples on a dataset called <code>babynames</code>. This package is installed on the lab computers but you can also <code>install.packages(&quot;babynames&quot;)</code> on your own personal computer if you want to prep for the lab outside the labs.</li>
</ul>
<p>Tidyverse (<a href="https://www.tidyverse.org/" class="uri">https://www.tidyverse.org/</a>) is a collection of R packages created by world-famous data scientist Hadley Wickham.</p>
<p>Tidyverse contains six core packages: dplyr , tidyr , readr , purrr , ggplot2 , and tibble. If you've ever typed library(tidyverse) into R, you will have seen that it loads in all of these packages in one go. Within these six core packages, you should be able to find everything you need to analyse your data.</p>
<p>In this lab, we are going to focus on the dplyr package, which contains six important functions:</p>
<ul>
<li>select() Include or exclude certain variables (columns)</li>
<li>filter() Include or exclude certain observations (rows)</li>
<li>mutate() Create new variables (columns)</li>
<li>arrange() Change the order of observations (rows)</li>
<li>group_by() Organize the observations into groups</li>
<li>summarise() Derive aggregate variables for groups of observations</li>
</ul>
<p>These six functions are known as ’single table verbs’ because they only operate on one table at a time. Later in the course you will learn two-table verbs that you can use to merge tables together. Although the operations of these functions may seem very simplistic, it’s amazing what you can accomplish when you string them together: Hadley Wickham has claimed that 90% of data analysis can be reduced to the operations described by these six functions.</p>
<p>Remember these key points as you work through the data activities on this course</p>
<ul>
<li>RStudio is a tool that enables you to become confident and competent working with data</li>
<li>This is essential as a psychologist as you need to know the data findings are based on are reliable and valid. Imagine delivering a treatment that was based on research where the analyst was not confident or competent?</li>
<li>Think of a skill you nailed the first time you did it. Not so easy? You will learn to work with data by repeating these basic skills over and over. It's new and will take time. Give yourself credit for trying and don't stress if it doesn't work right away. Use the resources we give, that are being talked about online among the open science community and ask questions in class and on the forums.</li>
</ul>
</div>
<div id="in-class-activity-2" class="section level2">
<h2><span class="header-section-number">3.2</span> In-class activity</h2>
<p>OK, so what is our first step? Yup, thats right, we need to tell RStudio where to find all the files we need and pull them in ready for work. Let's go back to lab 2 and use our previous script to remember how to load the package, read in the data and join the 2 data files together:</p>
<p>Task 1: Open up tidyverse and read in data</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse)
dat &lt;-<span class="st"> </span><span class="kw">read_csv</span> (<span class="st">&#39;files/ahi-cesd.csv&#39;</span>)
pinfo &lt;-<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&#39;files/participant-info.csv&#39;</span>)
all_dat &lt;-<span class="st"> </span><span class="kw">inner_join</span>(dat, pinfo, <span class="dt">by=</span><span class="st">&#39;id&#39;</span>, <span class="st">&#39;intervention&#39;</span>)</code></pre></div>
<p>Now lets get busy using our tidyverse verbs...</p>
<p>Task 2. Select the columns all_dat, ahiTotal, cesdTotal, sex, age, educ, income, occasion, elapsed.days from the data and creat variable <code>summarydata</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">summarydata &lt;-<span class="st"> </span><span class="kw">select</span>(all_dat, ahiTotal, cesdTotal, sex, age, educ, income, occasion, elapsed.days)</code></pre></div>
<p>Task 3. Arrange the data in the variable created above (<code>summarydata</code>) by ahiTotal with lowest score first.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">ahi_asc &lt;-<span class="st"> </span><span class="kw">arrange</span>(summarydata, <span class="dt">by =</span> ahiTotal)</code></pre></div>
<p>Task 4. Filter the data <code>ahi_desc</code> by taking out those who are over 65 years of age.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">age_65max &lt;-<span class="st"> </span><span class="kw">filter</span>(ahi_asc, age <span class="op">&lt;</span><span class="st"> </span><span class="dv">65</span>)</code></pre></div>
<p>Task 5. . Then, use summarise to create a new variable <code>data_median</code>, which calculates the median ahiTotal score in this grouped data and assign it a table head called <code>median_score</code>. <em>(Hint: if you're stuck, see .......).</em></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data_median &lt;-<span class="st"> </span><span class="kw">summarise</span>(age_65max, <span class="dt">median_score =</span> <span class="kw">median</span>(ahiTotal))</code></pre></div>
<p>Task 6. Group the data stored in the variable <code>age_65max</code> by sex, and store it in <code>data_sex</code> then use mutate to create a new column called Happiness which categorises participants based on whether they score above the median ahiTotal score for females.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">data_sex &lt;-<span class="st"> </span><span class="kw">group_by</span>(age_65max, sex)
happy_female &lt;-<span class="st"> </span><span class="kw">mutate</span>(data_sex, <span class="dt">Happiness_Female =</span> (ahiTotal <span class="op">&gt;</span><span class="st"> </span><span class="dv">74</span>))</code></pre></div>

</div>
</div>
<div class="psyteachr_footer">
  
</div>
<script>

/* update total correct if #total_correct exists */
update_total_correct = function() {
  if (t = document.getElementById("total_correct")) {
    t.innerHTML =
      document.getElementsByClassName("correct").length + " of " +
      document.getElementsByClassName("solveme").length + " correct";
  }
}

/* solution button toggling function */
b_func = function() {
  var cl = this.parentElement.classList;
  if (cl.contains('open')) {
    cl.remove("open");
  } else {
    cl.add("open");
  }
}

/* function for checking solveme answers */
solveme_func = function(e) {
  var real_answers = JSON.parse(this.dataset.answer);
  var my_answer = this.value;
  var cl = this.classList;
  if (cl.contains("ignorecase")) {
    my_answer = my_answer.toLowerCase();
  }
  if (cl.contains("nospaces")) {
    my_answer = my_answer.replace(/ /g, "");
  }
  
  if (my_answer !== "" & real_answers.includes(my_answer)) {
    cl.add("correct");
  } else {
    cl.remove("correct");
  }
  update_total_correct();
}

window.onload = function() {
  /* set up solution buttons */
  var buttons = document.getElementsByTagName("button");

  for (var i = 0; i < buttons.length; i++) {
    if (buttons[i].parentElement.classList.contains('solution')) {
      buttons[i].onclick = b_func;
    }
  }
  
  /* set up solveme inputs */
  var solveme = document.getElementsByClassName("solveme");

  for (var i = 0; i < solveme.length; i++) {
    /* make sure input boxes don't auto-anything */
    solveme[i].setAttribute("autocomplete","off");
    solveme[i].setAttribute("autocorrect", "off");
    solveme[i].setAttribute("autocapitalize", "off"); 
    solveme[i].setAttribute("spellcheck", "false");
    solveme[i].value = "";
    
    /* adjust answer for ignorecase or nospaces */
    var cl = solveme[i].classList;
    var real_answer = solveme[i].dataset.answer;
    if (cl.contains("ignorecase")) {
      real_answer = real_answer.toLowerCase();
    }
    if (cl.contains("nospaces")) {
      real_answer = real_answer.replace(/ /g, "");
    }
    solveme[i].dataset.answer = real_answer;
    
    /* attach checking function */
    solveme[i].onkeyup = solveme_func;
    solveme[i].onchange = solveme_func;
  }
  
  update_total_correct();
}

</script>
            </section>

          </div>
        </div>
      </div>
<a href="lab-2.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="lab-4.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": {},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

</body>

</html>
